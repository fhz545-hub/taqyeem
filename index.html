<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>Ù†Ù…ÙˆØ°Ø¬ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</title>

<!-- Ø®Ø·ÙˆØ· -->
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700;800&family=Cairo:wght@600;700&display=swap" rel="stylesheet">

<!-- Ù…ÙƒØªØ¨Ø§Øª -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<style>
:root{
  --moe-dark:#0c594e; --moe:#1e8a79; --ink:#0b2f2b; --bg:#ffffff;
  --border:#e0ece8; --muted:#667c76; --shadow:0 4px 16px rgba(0,0,0,.10);
}
*{box-sizing:border-box;scroll-behavior:smooth}
html,body{margin:0;background:#fff;color:var(--ink);font-family:"Tajawal","Cairo",system-ui;font-size:15px;line-height:1.7}
#page{width:min(1120px,100%);margin:0 auto;padding:10px 12px 64px;background:#fff}

/* Ø±Ø£Ø³ */
.header-grid{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;text-align:center;margin-bottom:8px}
.h-left,.h-right{display:flex;flex-direction:column;gap:2px;align-items:center}
.h-left .line,.h-right .line{font-weight:700;color:var(--moe-dark)}
#moeLogo{width:min(220px,40vw);object-fit:contain;filter:drop-shadow(0 2px 6px rgba(0,0,0,.15))}

/* Ø²Ø± Ø§Ù„Ù‚Ù„Ù… */
.edit-btn{
  display:inline-flex;align-items:center;justify-content:center;
  width:22px;height:22px;margin-inline-start:6px;border:1px solid var(--border);
  border-radius:999px;background:#fff;cursor:pointer;font-weight:800;color:var(--moe-dark);
  line-height:1;box-shadow:0 1px 2px rgba(0,0,0,.05)
}
.edit-btn:hover{background:#f5fffb}

/* Ø£Ø¯ÙˆØ§Øª */
.toolbar{display:grid;grid-template-columns:1.2fr 1.2fr repeat(8,auto);gap:8px;align-items:center;margin:10px 0}
.select-compact{appearance:none;width:100%;height:36px;padding:0 30px 0 12px;border:1px solid var(--border);border-radius:999px;background:#fff;font-weight:800;color:#0b3a34;cursor:pointer}
.toolbar .ico{position:absolute;inset-inline-end:10px;top:50%;transform:translateY(-50%);pointer-events:none}
.pill{border:1px solid var(--border);border-radius:12px;padding:8px 12px;font-weight:800;background:linear-gradient(180deg,#ffffff,#f7fffd);cursor:pointer;color:var(--moe-dark);transition:all .2s;font-size:13px;white-space:nowrap}
.pill:hover{background:linear-gradient(180deg,#f9fefc,#e8f7f3)}
.pill.primary{background:linear-gradient(180deg,var(--moe),var(--moe-dark));color:#fff;border-color:var(--moe-dark)}
.pill[disabled]{opacity:.5;pointer-events:none}

/* Ø¨ÙŠØ§Ù†Ø§Øª */
.data-row{display:grid;grid-template-columns:2fr repeat(3,1fr);gap:8px;margin:10px 0}
.lined{height:42px;border:1px solid var(--border);border-radius:12px;padding:0 10px;width:100%}

/* Ø¬Ø¯Ø§ÙˆÙ„ */
.table{width:100%;border-collapse:collapse;border:1px solid var(--border);border-radius:12px;overflow:hidden}
.table th,.table td{border:1px solid var(--border);padding:8px}
.table th{background:var(--moe);color:#fff}

/* Ø³ÙÙ„Ù‘Ù… Ø§Ù„ØªÙ‚Ø¯ÙŠØ±: ÙˆØ³Ø· Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø± */
.table td:nth-child(3), .table th:nth-child(3){text-align:center}
.select-mini{
  appearance:none;background:#fff;border:none;border-radius:10px;padding:4px 8px;
  font-weight:900;color:#0b3430;outline:none;opacity:.65;
  text-align:center; text-align-last:center;
}
.select-mini:disabled{opacity:.28}
.select-mini:focus{outline:2px solid #bfe8df}

/* ØªÙ„ÙˆÙŠÙ† ØµÙÙˆÙ Ø­Ø³Ø¨ Ø§Ù„Ø¯Ø±Ø¬Ø© */
tr.rate-1{background:linear-gradient(90deg,#fee2e2 0,#fff 60%)}
tr.rate-2{background:linear-gradient(90deg,#fde68a 0,#fff 60%)}
tr.rate-3{background:linear-gradient(90deg,#f0fdf4 0,#fff 60%)}
tr.rate-4{background:linear-gradient(90deg,#dcfce7 0,#fff 60%)}
tr.rate-5{background:linear-gradient(90deg,#bbf7d0 0,#fff 60%)}

/* KPI */
.kpi-wrap{position:relative;margin:12px 0}
.kpi-bar{position:relative;height:16px;border-radius:999px;overflow:hidden;border:1px solid #e9f4f1}
.kpi-fill{position:absolute;inset:0;width:0%;background:linear-gradient(90deg,#f87171,#fbbf24,#34d399,#10b981);opacity:.95;transition:width .5s}
.kpi-label{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);padding:2px 4px}

/* ØµÙ†Ø§Ø¯ÙŠÙ‚ Ù†Øµ */
.box{border:1px solid var(--border);background:#fff;border-radius:12px;padding:10px}
.box h3{margin:0 0 6px;color:#0c594e}
.box p{white-space:pre-wrap;word-break:break-word;line-height:1.9;margin:0}

/* Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ®Ø·ÙŠØ· */
#goalsWrap{margin:8px 0;display:none}
.goal-input{width:100%;border:1px solid var(--border);border-radius:10px;padding:6px 8px;text-align:center}
.goal-hint{
  margin-top:6px;font-weight:800;color:#b30000;
  border:1px dashed var(--border);border-radius:10px;padding:8px 10px;
  background:linear-gradient(180deg,#ffffff,#fff6f6)
}
#goalsTable th,#goalsTable td{ text-align:center }

/* Ù†ÙˆØ§ÙØ° */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:100;padding:10px}
.panel{width:min(900px,95%);max-height:95vh;background:#fff;border-radius:16px;box-shadow:var(--shadow);display:flex;flex-direction:column}
.panel .head{background:var(--moe-dark);color:#fff;font-weight:800;padding:10px 14px;border-top-left-radius:16px;border-top-right-radius:16px;display:flex;justify-content:space-between;align-items:center}
.panel .body{overflow-y:auto;padding:16px;color:var(--ink);font-size:14px}

/* Ø·Ø¨Ø§Ø¹Ø© */
@media print{
  .no-print,.modal,.toolbar,[data-hide-on-export]{display:none!important}
  #page{padding:0}
  @page{size:A4;margin:12mm}
}

/* ØªØ°ÙŠÙŠÙ„ */
.footer-note{color:#6a7f7b;font-size:12px;text-align:center;margin-top:10px}
@media print{.footer-note{display:none}}
</style>
</head>
<body>
<div id="page">

  <!-- Ø±Ø£Ø³ -->
  <header class="header-grid">
    <div class="h-left">
      <div class="line">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
      <div class="line">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
      <div class="line" id="dirText">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©
        <button class="edit-btn no-print" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©" data-edit="#dirText">âœ</button>
      </div>
      <div class="line" id="schoolText">Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙŠØ¹Ù‚ÙˆØ¨ÙŠ
        <button class="edit-btn no-print" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø©" data-edit="#schoolText">âœ</button>
      </div>
    </div>
    <div class="h-center">
      <img id="moeLogo" alt="Ø´Ø¹Ø§Ø± ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…" src="ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ….png"
           onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,'+encodeURIComponent(`<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'220\' height=\'90\'><rect fill=\'white\' width=\'100%\' height=\'100%\'/><text x=\'50%\' y=\'55%\' dominant-baseline=\'middle\' text-anchor=\'middle\' font-family=\'Tajawal\' font-weight=\'800\' font-size=\'20\' fill=\'#1e8a79\'>ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</text></svg>`)"/>
    </div>
    <div class="h-right">
      <div id="todayTxt" class="line"></div>
      <div id="dateTxt" class="line"></div>
      <div id="modelTxt" class="line"></div>
    </div>
  </header>

  <!-- Ø£Ø¯ÙˆØ§Øª -->
  <section class="toolbar no-print">
    <div style="position:relative">
      <select id="modelSelect" class="select-compact" title="Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬">
        <option value="teacher">Ù…Ø¹Ù„Ù…</option>
        <option value="vp">ÙˆÙƒÙŠÙ„</option>
        <option value="principal">Ù…Ø¯ÙŠØ±</option>
        <option value="counselor">Ù…ÙˆØ¬Ù‡ Ø·Ù„Ø§Ø¨ÙŠ</option>
        <option value="lab">Ù…Ø­Ø¶Ø± Ù…Ø®ØªØ¨Ø±</option>
        <option value="kg">Ù…Ø¹Ù„Ù…Ø© Ø±ÙŠØ§Ø¶ Ø£Ø·ÙØ§Ù„</option>
        <option value="health">Ù…Ø¹Ù„Ù… Ù…Ø³Ù†Ø¯ Ù„Ù‡ ØªÙˆØ¬ÙŠÙ‡ ØµØ­ÙŠ</option>
        <option value="activity">Ù…Ø¹Ù„Ù… Ù…Ø³Ù†Ø¯ Ù„Ù‡ Ù†Ø´Ø§Ø· Ø·Ù„Ø§Ø¨ÙŠ</option>
      </select>
      <span class="ico">â–¾</span>
    </div>
    <div style="position:relative">
      <select id="stageSelect" class="select-compact" title="Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…">
        <option value="first">Ø§Ù„Ø£ÙˆÙ„Ù‰ (Ø§Ù„ØªØ®Ø·ÙŠØ·)</option>
        <option value="second">Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØµÙ Ø³Ù†ÙˆÙŠØ©)</option>
        <option value="final">Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© (Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ)</option>
      </select>
      <span class="ico">â–¾</span>
    </div>

    <button id="btnGapPlan" class="pill primary" type="button">Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ† ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
    <button id="openHelp" class="pill" type="button">â„¹ï¸ Ø§Ù„Ø´Ø±Ø­</button>
    <button id="openGuides" class="pill" type="button">ğŸ“— Ø§Ù„Ø£Ø¯Ù„Ù‘Ø©</button>
    <button id="btnPrint" class="pill" type="button">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
    <button id="btnPdf" class="pill" type="button">ğŸ§¾ PDF</button>
    <button id="btnSave" class="pill" type="button">ğŸ’¾ Ø­ÙØ¸</button>
    <button id="btnClear" class="pill" type="button">ğŸ§¹ Ù…Ø³Ø­</button>
    <button id="btnWhatsApp" class="pill" type="button">ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨</button>
  </section>

  <!-- Ø¨ÙŠØ§Ù†Ø§Øª -->
  <section class="data-row no-print">
    <div style="position:relative">
      <input id="tName" class="lined" placeholder="Ø§Ø³Ù… Ø´Ø§ØºÙ„ Ø§Ù„ÙˆØ¸ÙŠÙØ©">
      <span id="openMini" style="position:absolute;inset-inline-start:10px;top:50%;transform:translateY(-50%);font-weight:900;color:#0b534b;cursor:pointer">ğŸ”</span>
    </div>
    <input id="tId" class="lined" inputmode="numeric" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©">
    <input id="tSpec" class="lined" placeholder="Ø§Ù„ØªØ®ØµØµ/Ø§Ù„Ù…Ø³Ù…Ù‰">
    <input id="tRank" class="lined" placeholder="Ø§Ù„Ù…Ø±ØªØ¨Ø©/Ø§Ù„Ø±ØªØ¨Ø©">
  </section>

  <!-- Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ®Ø·ÙŠØ· -->
  <section id="goalsWrap">
    <div style="font-weight:800;color:#0c594e;margin-bottom:6px">
      Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ù…Ù‡Ù†ÙŠØ© ÙˆÙ…Ø¤Ø´Ø±Ø§ØªÙ‡Ø§ (Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ®Ø·ÙŠØ· )
    </div>
    <!-- Ø§Ù„Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ÙŠØ© â€” Ù„Ø§ ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©/Ø§Ù„Ø­ÙØ¸ -->
    <div class="goal-hint no-print" data-hide-on-export style="font-size:12px">
  ğŸ”´ Ø¯ÙˆÙ‘Ù† Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³ Ù…Ø¹ Ù…Ø¤Ø´Ø±Ø§ØªÙ‡Ø§ ÙˆÙ‚ÙŠÙ…Ù‡Ø§ Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØµÙ Ø§Ù„Ø³Ù†ÙˆÙŠØ©.
</div>
    <table class="table" id="goalsTable" style="margin-top:8px">
      <thead><tr><th>Ø§Ù„Ù‡Ø¯Ù</th><th>Ø§Ù„Ù…Ø¤Ø´Ø±</th><th>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©</th></tr></thead>
      <tbody id="goalsBody"></tbody>
    </table>
  </section>

  <!-- KPI -->
  <div class="kpi-wrap">
    <div class="kpi-bar"><div class="kpi-fill" id="kpiFill"></div></div>
    <div class="kpi-label">
      <div id="kpiLabelL">Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²: 0%</div>
      <div id="kpiLabelM">Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ù‘ÙÙ„Ù‘Ù…: 0.00 / 5</div>
      <div id="kpiLabelR">Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ÙˆØ²Ø§Ù†: 0%</div>
    </div>
  </div>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… -->
  <section id="rubric">
    <table class="table">
      <thead>
        <tr>
          <th style="text-align:right">Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</th>
          <th>Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ù†Ø³Ø¨ÙŠ</th>
          <th>Ø³ÙÙ„Ù‘Ù… Ø§Ù„ØªÙ‚Ø¯ÙŠØ± (1â€“5)</th>
          <th>Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù…ÙˆØ²ÙˆÙ†</th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
      <tfoot>
        <tr>
          <th style="text-align:right">Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù… Ù„Ù„Ø£Ø¯Ø§Ø¡ (Ù…Ù† 5)</th>
          <th id="sumWeight">0%</th>
          <th id="avgOutOf5" style="font-weight:900;color:#fff">0.00</th>
          <th id="sumScore">0.00</th>
        </tr>
      </tfoot>
    </table>
  </section>

  <!-- Ø§Ù„Ù‚ÙˆØ©/Ø§Ù„ØªØ­Ø³ÙŠÙ† -->
  <section id="siWrap" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin:12px 0">
    <div class="box"><h3>Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©</h3><p id="strengthsBox">â€”</p></div>
    <div class="box"><h3>Ù…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ­Ø³ÙŠÙ† ÙˆØ§Ù„ØªØ·ÙˆÙŠØ±</h3><p id="improveBox">â€”</p></div>
  </section>

  <!-- ØªÙˆÙ‚ÙŠØ¹ -->
  <section style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin:14px 0">
    <div style="text-align:center">
      <div id="signTeacherName" style="font-weight:800;color:#0c594e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">â€”</div>
      <div style="border-top:1px dashed #bcd3cd;margin-top:6px;width:80%;margin-inline:auto"></div>
      <div style="font-size:12px;color:#667">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸Ù</div>
    </div>
    <div style="text-align:center">
      <div style="display:inline-flex;align-items:center;gap:6px;justify-content:center">
        <div id="signPrincipalName" style="font-weight:800;color:#0c594e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">ÙÙ‡Ø¯ Ø­Ø§Ù…Ø¯ Ø¹Ù„ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ</div>
        <button class="edit-btn no-print" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ±" data-edit="#signPrincipalName">âœ</button>
      </div>
      <div style="border-top:1px dashed #bcd3cd;margin-top:6px;width:80%;margin-inline:auto"></div>
      <div style="font-size:12px;color:#667">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
    </div>
  </section>

  <!-- Ø¹Ø¯Ø³Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ -->
  <div class="modal" id="mini">
    <div class="panel" style="width:min(900px,96%)">
      <div class="head"><div>Ø¹Ø¯Ø³Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡</div><button id="miniClose" class="pill" style="background:#fff;color:#0c594e;border-color:#fff" type="button">âœ– Ø¥ØºÙ„Ø§Ù‚</button></div>
      <div class="body">
        <div style="display:grid;grid-template-columns:1fr auto;gap:8px">
          <input id="qName" class="lined" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…">
          <div style="display:flex;gap:8px">
            <input type="file" id="xlsInput" accept=".xlsx,.xls,.csv" style="display:none"/>
            <button id="btnPickFile" class="pill" type="button">â¬†ï¸ Ø§Ø³ØªÙŠØ±Ø§Ø¯</button>
            <button id="btnTpl" class="pill" type="button">â¬‡ï¸ Ù‚Ø§Ù„Ø¨ Excel</button>
          </div>
        </div>
        <div id="nameStats" style="margin-top:6px;color:#667"></div>
        <div id="nameList" style="max-height:320px;overflow:auto;border:1px solid var(--border);border-radius:12px;padding:8px;margin-top:8px"></div>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„Ø´Ø±Ø­ -->
  <div class="modal" id="helpModal">
    <div class="panel" style="width:min(900px,96%)">
      <div class="head"><div>â„¹ï¸ Ø§Ù„Ø´Ø±Ø­</div><button data-close="#helpModal" class="pill" style="background:#fff;color:#0c594e;border-color:#fff" type="button">âœ– Ø¥ØºÙ„Ø§Ù‚</button></div>
      <div class="body">
        <p><strong>Ø£Ø¯Ø§Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© Ù…Ø³Ø§Ù†ÙØ¯Ø© Ù„ØªØ¹Ø¨Ø¦Ø© ÙˆØªÙˆØ«ÙŠÙ‚ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ Ù¡Ù¤Ù¤Ù§Ù‡Ù€ Ù„Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙˆÙÙ‚ Ø¯Ù„ÙŠÙ„ ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ….</strong></p>
        <p>ÙŠØªÙŠØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹:</p>
        <ul>
          <li>Ø§Ø®ØªÙŠØ§Ø± Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ø§Ù„Ø£ÙˆÙ„Ù‰ØŒ Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©).</li>
          <li>ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ù†ÙˆØ¯ ÙˆØªÙ‚Ø¯ÙŠØ±Ù‡Ø§ Ø¢Ù„ÙŠÙ‹Ø§ Ø¨Ø¯Ø±Ø¬Ø§Øª Ù…Ù† 1 Ø¥Ù„Ù‰ 5.</li>
          <li>Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ© ÙˆÙ…Ø¬Ø§Ù„Ø§Øª Ø§Ù„ØªØ·ÙˆÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</li>
          <li>Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ† ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ·Ø¨Ø§Ø¹ØªÙ‡Ø§ Ø£Ùˆ Ø­ÙØ¸Ù‡Ø§ PDF.</li>
          <li>Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù…Ù† Ù…Ù„Ù Excel Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</li>
        </ul>
        <p><strong>âš ï¸ Ø¥Ø®Ù„Ø§Ø¡ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</strong></p>
        <p>Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø£Ø¯Ø§Ø© Ù…Ø³Ø§Ù†Ø¯Ø© ØºÙŠØ± Ø±Ø³Ù…ÙŠØ© Ù„ØªÙŠØ³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©ØŒ ÙˆÙ„Ø§ ÙŠÙØ¹ØªÙ…Ø¯ Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø±Ø³Ù…ÙŠØ© ÙÙŠ Ù†Ø¸Ø§Ù… ÙØ§Ø±Ø³ Ø£Ùˆ Ù†ÙˆØ±.<br/>
        Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø±Ø¬Ø§Øª Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆÙŠÙÙ†ØµØ­ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø£Ùˆ Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§ Ø®Ø§Ø±Ø¬ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©.</p>
        <p>ğŸ“© Ù„Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø©: <a href="mailto:fhz545@gmail.com">fhz545@gmail.com</a></p>
      </div>
    </div>
  </div>

  <!-- Ø§Ù„Ø£Ø¯Ù„Ù‘Ø© -->
  <div class="modal" id="guidesModal">
    <div class="panel" style="width:min(900px,96%)">
      <div class="head"><div>ğŸ“— Ø§Ù„Ø£Ø¯Ù„Ù‘Ø©</div><button data-close="#guidesModal" class="pill" style="background:#fff;color:#0c594e;border-color:#fff" type="button">âœ– Ø¥ØºÙ„Ø§Ù‚</button></div>
      <div class="body">
        <p><strong>Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø¹Ø§Ù…:</strong> Ø±ÙØ¹ ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØªØ­ÙÙŠØ² Ø§Ù„ØªÙ…ÙŠØ² ÙˆØ§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø¹Ø¨Ø± Ø¥Ø¯Ø§Ø±Ø© Ø£Ø¯Ø§Ø¡ Ù…Ù‡Ù†ÙŠØ© Ù…Ø³ØªÙ…Ø±Ø©.</p>
        <p><strong>Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:</strong><br/>
        ğŸŸ© Ø§Ù„ØªØ®Ø·ÙŠØ·: ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆÙ…ÙŠØ«Ø§Ù‚ Ø§Ù„Ø£Ø¯Ø§Ø¡.<br/>
        ğŸŸ¨ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØµÙ Ø³Ù†ÙˆÙŠØ©: Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø©.<br/>
        ğŸŸ¥ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ù‚ÙŠØ§Ø³ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ† ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡.</p>
        <p><strong>Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</strong> Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ© â€“ Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ù‡Ù†ÙŠ â€“ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ± â€“ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³ â€“ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… â€“ Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ¹Ù„Ù… â€“ Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ.</p>
        <p><strong>Ø³ÙÙ„Ù‘Ù… Ø§Ù„ØªÙ‚Ø¯ÙŠØ±:</strong> 5 ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª â”‚ 4 Ù…ØªÙ…ÙŠØ² â”‚ 3 ÙŠÙˆØ§ÙÙ‚ â”‚ 2 Ø¨Ø­Ø§Ø¬Ø© Ù„ØªØ·ÙˆÙŠØ± â”‚ 1 ØºÙŠØ± Ù…Ø±Ø¶Ù</p>
        <p><strong>Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠ:</strong> Ù„Ø§Ø¦Ø­Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© â€“ Ø¥Ø·Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠ â€“ Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ÙŠ Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ (Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ 1447Ù‡Ù€).</p>
        <p><strong>Ø®Ø·Ø© Ø§Ù„ØªØ­Ø³ÙŠÙ† (IDP):</strong> ØªÙØ¨Ù†Ù‰ Ø¹Ù„Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ¬ÙˆØ§ØªØŒ ÙˆÙˆØ¶Ø¹ Ø£Ù‡Ø¯Ø§Ù ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù‚ÙŠØ§Ø³ ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</p>
        <p><strong>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ§Øª:</strong> Ø§Ù„ÙˆØ²Ø§Ø±Ø©: Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ù…ØªØ§Ø¨Ø¹Ø© â”‚ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©: Ø§Ù„Ø¥Ø´Ø±Ø§Ù â”‚ Ø§Ù„Ù…Ø¯ÙŠØ±: Ø§Ù„ØªÙ‚ÙŠÙŠÙ… â”‚ Ø§Ù„Ù…Ø¹Ù„Ù…: Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… ÙˆØ§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°Ø§ØªÙŠ.</p>
        <p style="color:#a33"><strong>âš ï¸ ØªÙ†Ø¨ÙŠÙ‡:</strong> Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ø®Ù‘Øµ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ±Ø¨ÙˆÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØŒ ÙˆÙ„Ø§ ÙŠÙØºÙ†ÙŠ Ø¹Ù† Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø§Ù„ØµØ§Ø¯Ø±Ø© Ù…Ù† ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ….</p>
      </div>
    </div>
  </div>

  <!-- Ø®Ø·Ø© ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ -->
  <div class="modal" id="gapModal">
    <div class="panel" id="gapPanel" style="width:min(900px,96%);background:#fff">
      <div class="head">
        <div>Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ† ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡</div>
        <div style="display:flex;gap:8px">
          <button id="gapPdf" class="pill" data-hide-on-export style="background:#fff;color:#0c594e;border-color:#fff" type="button">ğŸ§¾ Ø­ÙØ¸ PDF</button>
          <button id="gapClose" class="pill" data-hide-on-export style="background:#fff;color:#0c594e;border-color:#fff" type="button">âœ– Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
      </div>
      <div class="body" id="gapBody">
        <!-- Ø±Ø£Ø³ Ù…ØµØºÙ‘Ø± -->
        <div class="header-grid" style="margin-bottom:8px">
          <div class="h-left">
            <div class="line">Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</div>
            <div class="line">ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div>
            <div class="line" id="g_dirHeader">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</div>
            <div class="line" id="g_schoolHeader">Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙŠØ¹Ù‚ÙˆØ¨ÙŠ</div>
          </div>
          <div class="h-center">
            <img id="g_moeLogo" alt="Ø´Ø¹Ø§Ø± ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…" src="ÙˆØ²Ø§Ø±Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ….png" style="width:min(220px,40vw);object-fit:contain"/>
          </div>
          <div class="h-right">
            <div id="g_today" class="line"></div>
            <div id="g_date" class="line"></div>
            <div id="g_model" class="line"></div>
          </div>
        </div>

        <!-- Ø¨ÙŠØ§Ù†Ø§Øª -->
        <section style="border:1px solid var(--border);border-radius:12px;overflow:hidden;margin-bottom:10px">
          <table class="table" style="margin:0">
            <thead><tr><th colspan="4">Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</th></tr></thead>
            <tbody>
              <tr><td>Ø§Ù„Ø§Ø³Ù…</td><td id="g_name">â€”</td><td>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</td><td id="g_dir">â€”</td></tr>
              <tr><td>Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</td><td id="g_title">â€”</td><td>Ø§Ù„ØªØ®ØµØµ</td><td id="g_spec">â€”</td></tr>
              <tr><td>Ø§Ù„Ù…Ø±Ø­Ù„Ø©</td><td id="g_stage">â€”</td><td>Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…Ù„</td><td id="g_school">â€”</td></tr>
            </tbody>
          </table>
        </section>

        <!-- Ø§Ù„ÙØ¬ÙˆØ© -->
        <section style="border:1px solid var(--border);border-radius:12px;padding:10px;margin-top:6px">
          <h3 style="margin:0 0 8px">Ø£- ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙØ¬ÙˆØ©</h3>
          <table class="table" style="margin:0">
            <thead><tr><th style="width:50%">Ø§Ù„Ù…Ø¹ÙŠØ§Ø±</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th></tr></thead>
            <tbody id="g_targets"></tbody>
          </table>
        </section>

        <!-- ØªØ­Ù„ÙŠÙ„ -->
        <section style="border:1px solid var(--border);border-radius:12px;padding:10px;margin-top:8px">
          <h3 style="margin:0 0 8px">Ø¨- ØªØ­Ù„ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£Ø¯Ø§Ø¡</h3>
          <table class="table" style="margin:0">
            <thead><tr><th>Ø§Ù„ØªÙ…ÙƒÙ†</th><th>Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨</th><th>Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©</th><th>Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„ØªØ­Ø³ÙŠÙ†</th></tr></thead>
            <tbody><tr><td id="g_grade" style="font-weight:900"></td><td contenteditable="true" id="g_reasons"></td><td id="g_strengths"></td><td id="g_gaps"></td></tr></tbody>
          </table>
        </section>

        <!-- Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„ -->
        <section style="border:1px solid var(--border);border-radius:12px;padding:10px;margin-top:8px">
          <h3 style="margin:0 0 8px">Ø¬- Ø®Ø·Ø© Ø§Ù„Ø¹Ù…Ù„</h3>
          <table class="table" style="margin:0">
            <thead><tr><th>Ù…</th><th>Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¦ÙŠØ©</th><th>Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ†ÙÙŠØ°</th><th>Ø§Ù„Ù…Ø¯Ø©</th><th>Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª</th><th>Ø§Ù„Ù…ÙƒÙ„Ù</th><th>Ø§Ù„Ù…Ø³Ø§Ù†Ø¯</th><th>Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡</th></tr></thead>
            <tbody id="g_actions"></tbody>
          </table>
        </section>

        <!-- Ø§Ù„ØªÙˆØ§Ù‚ÙŠØ¹ -->
        <section style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
          <div style="text-align:center">
            <div id="g_signTeacher" style="font-weight:800;color:#0c594e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">â€”</div>
            <div style="border-top:1px dashed #bcd3cd;margin-top:6px;width:80%;margin-inline:auto"></div>
            <div style="font-size:12px;color:#667">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸Ù</div>
          </div>
          <div style="text-align:center">
            <div id="g_signPrincipal" style="font-weight:800;color:#0c594e;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">ÙÙ‡Ø¯ Ø­Ø§Ù…Ø¯ Ø¹Ù„ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ</div>
            <div style="border-top:1px dashed #bcd3cd;margin-top:6px;width:80%;margin-inline:auto"></div>
            <div style="font-size:12px;color:#667">ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <div class="footer-note no-print">ØªÙ†ÙÙŠØ° ÙˆØªØµÙ…ÙŠÙ…: ÙÙ‡Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ</div>
</div>

<script>
const $=s=>document.querySelector(s), $$=s=>[...document.querySelectorAll(s)];

/* ØªØ±ÙˆÙŠØ³Ø© ÙˆØªØ§Ø±ÙŠØ® */
(function(){
  const days=['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø§Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'];
  const d=new Date();
  $('#todayTxt').textContent=days[d.getDay()];
  $('#dateTxt').textContent=d.toLocaleDateString('ar-SA');
  $('#modelTxt').textContent='Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: â€”';
})();

/* â€”â€” Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
const STORE_KEYS={ dir:'PF_dirText', school:'PF_schoolText', principal:'PF_principalName' };
function loadHeaderPrefs(){
  const dir=localStorage.getItem(STORE_KEYS.dir)||'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØªØ¹Ù„ÙŠÙ… Ø¨Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©';
  const school=localStorage.getItem(STORE_KEYS.school)||'Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ÙŠØ¹Ù‚ÙˆØ¨ÙŠ';
  const principal=localStorage.getItem(STORE_KEYS.principal)||'ÙÙ‡Ø¯ Ø­Ø§Ù…Ø¯ Ø¹Ù„ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ';
  $('#dirText').firstChild.nodeValue = dir;
  $('#schoolText').firstChild.nodeValue = school;
  $('#signPrincipalName').textContent = principal;
  // Ù…Ø²Ø§Ù…Ù†Ø© Ø®Ø·Ø© Ø§Ù„ÙØ¬ÙˆØ©
  $('#g_dirHeader').textContent=dir;
  $('#g_schoolHeader').textContent=school;
  $('#g_signPrincipal').textContent=principal;
}
loadHeaderPrefs();

/* Ù…Ø­Ø±Ø± Ø§Ù„Ù‚Ù„Ù… â€” ØªØ¹Ø¯ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù…Ø¹ Ø­ÙØ¸ ÙÙˆØ±ÙŠ */
document.addEventListener('click',e=>{
  const t=e.target.closest('.edit-btn'); if(!t) return;
  const sel=t.getAttribute('data-edit'); const el=$(sel); if(!el) return;
  const current=(el.textContent||'').trim();
  const title=t.getAttribute('title')||'ØªØ¹Ø¯ÙŠÙ„';
  const val=prompt(title, current);
  if(val===null) return;
  const clean=val.trim().replace(/\s+/g,' ');
  if(el.id==='dirText'){ el.firstChild.nodeValue = clean; localStorage.setItem(STORE_KEYS.dir,clean); $('#g_dirHeader').textContent=clean; $('#g_dir').textContent=clean; }
  else if(el.id==='schoolText'){ el.firstChild.nodeValue = clean; localStorage.setItem(STORE_KEYS.school,clean); $('#g_schoolHeader').textContent=clean; $('#g_school').textContent=clean; }
  else if(el.id==='signPrincipalName'){ el.textContent = clean; el.parentElement.appendChild(t); localStorage.setItem(STORE_KEYS.principal,clean); $('#g_signPrincipal').textContent=clean; }
});

/* ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ (Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØ§ØªÙŠØ­) */
const RUBRICS={
  teacher:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:10},
    {name:"Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³",weight:10},
    {name:"ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:10},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ° Ø®Ø·Ø© Ø§Ù„ØªØ¹Ù„Ù…",weight:10},
    {name:"ØªÙˆØ¸ÙŠÙ ØªÙ‚Ù†ÙŠØ§Øª ÙˆÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©",weight:10},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©",weight:5},
    {name:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙÙŠØ©",weight:5},
    {name:"ØªØ­Ù„ÙŠÙ„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† ÙˆØªØ´Ø®ÙŠØµ Ù…Ø³ØªÙˆÙŠØ§ØªÙ‡Ù…",weight:10},
    {name:"ØªÙ†ÙˆØ¹ Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…",weight:10},
  ],
  activity:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:10},
    {name:"Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³",weight:5},
    {name:"ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:5},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ° Ø®Ø·Ø© Ø§Ù„ØªØ¹Ù„Ù…",weight:5},
    {name:"ØªÙˆØ¸ÙŠÙ ØªÙ‚Ù†ÙŠØ§Øª ÙˆÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©",weight:5},
    {name:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙÙŠØ©",weight:5},
    {name:"ØªØ­Ù„ÙŠÙ„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† ÙˆØªØ´Ø®ÙŠØµ Ù…Ø³ØªÙˆÙŠØ§ØªÙ‡Ù…",weight:5},
    {name:"ØªÙ†ÙˆØ¹ Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…",weight:5},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© Ø²Ù…Ù†ÙŠØ© ÙˆÙ…Ø¹ØªÙ…Ø¯Ø© Ù„Ø¨Ø±Ø§Ù…Ø¬ ÙˆÙØ¹Ø§Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ",weight:10},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© Ù„Ù„Ø¨Ø±Ø§Ù…Ø¬ ÙˆØ§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©",weight:5},
    {name:"Ø¯Ø¹Ù… Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆÙÙ‚ Ø§Ø­ØªÙŠØ§Ø¬Ù‡Ù… ÙˆÙ…ÙŠÙˆÙ„Ù‡Ù… Ù„Ù„Ø£Ù†Ø´Ø·Ø©",weight:5},
    {name:"ØªØ­ÙÙŠØ² Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",weight:10},
  ],
  health:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:10},
    {name:"Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³",weight:5},
    {name:"ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:5},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ ÙˆØªÙ†ÙÙŠØ° Ø®Ø·Ø© Ø§Ù„ØªØ¹Ù„Ù…",weight:5},
    {name:"ØªÙˆØ¸ÙŠÙ ØªÙ‚Ù†ÙŠØ§Øª ÙˆÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ©",weight:5},
    {name:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙÙŠØ©",weight:5},
    {name:"ØªØ­Ù„ÙŠÙ„ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† ÙˆØªØ´Ø®ÙŠØµ Ù…Ø³ØªÙˆÙŠØ§ØªÙ‡Ù…",weight:5},
    {name:"ØªÙ†ÙˆØ¹ Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…",weight:5},
    {name:"ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ù„Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",weight:15},
    {name:"Ø­ØµØ± Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØµØ­ÙŠØ© Ù„Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„ØµØ­ÙŠØ© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",weight:10},
  ],
  kg:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:5},
    {name:"Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³",weight:5},
    {name:"ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ¹Ù„Ù…",weight:5},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© Ø´Ø§Ù…Ù„Ø© ÙˆØªÙØµÙŠÙ„ÙŠØ© Ù„Ù„Ø£Ù†Ø´Ø·Ø©",weight:5},
    {name:"ØªØµÙ…ÙŠÙ… Ø®Ø¨Ø±Ø§Øª ØªØ¹Ù„Ù… Ù…Ø±Ù†Ø© ÙˆÙ…Ø¨ØªÙƒØ±Ø©",weight:5},
    {name:"ØªÙˆØ¸ÙŠÙ ØªÙ‚Ù†ÙŠØ§Øª ÙˆÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©",weight:5},
    {name:"Ø§Ù„ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©",weight:5},
    {name:"Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª ØªØ¯Ø±ÙŠØ³ ÙØ§Ø¹Ù„Ø© ÙˆÙ…ØªÙ†ÙˆØ¹Ø©",weight:5},
    {name:"Ø¥Ø´Ø±Ø§Ùƒ Ø§Ù„Ø£Ø³Ø±Ø© ÙÙŠ Ø¯Ø¹Ù… Ø§Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„ØªØ¹Ù„Ù‘Ù…",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¢Ù…Ù†Ø© ÙˆÙ…ÙÙ…ÙƒÙ‘Ù†Ø© Ù„Ù„ØªØ·ÙˆÙ‘Ø± Ø§Ù„Ù†Ù…Ø§Ø¦ÙŠ ÙˆØ§Ù„ØªØ¹Ù„Ù‘Ù…",weight:15},
    {name:"ØªØ¹Ø²ÙŠØ² Ø§Ù„ØªÙØ§Ø¹Ù„ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ÙˆØ¨Ù†Ø§Ø¡ Ø¨ÙŠØ¦Ø© ØªØ¹Ù„Ù…",weight:5},
    {name:"ØªÙ‚ÙŠÙŠÙ… ØªÙ‚Ø¯Ù… Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ† ÙˆÙ…ØªØ§Ø¨Ø¹ØªÙ‡ Ø¨Ø§Ù†ØªØ¸Ø§Ù…",weight:5},
    {name:"ØªÙ†ÙˆØ¹ Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„ØªÙ‚ÙˆÙŠÙ…",weight:5},
    {name:"Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ© ÙˆØ§Ù„Ø¥Ø«Ø±Ø§Ø¦ÙŠØ©",weight:5},
    {name:"Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø®Ø¨Ø±Ø§Øª",weight:5},
    {name:"Ø¯Ø¹Ù… Ø§ÙƒØªØ³Ø§Ø¨ Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª",weight:5},
    {name:"ØªÙ†Ù…ÙŠØ© Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ù„ØºÙˆÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ù„ÙƒÙ„ Ù…ØªØ¹Ù„Ù…",weight:5},
  ],
  lab:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:10},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:10},
    {name:"Ø§Ù„ØªÙ†ÙˆØ¹ ÙÙŠ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ³",weight:10},
    {name:"ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:10},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© ÙŠÙˆÙ…ÙŠØ© Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ù…Ø®ØªØ¨Ø±",weight:5},
    {name:"Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø¨Ø§Ù„Ø£Ø³Ø³ ÙˆØ§Ù„Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„ÙÙ†ÙŠØ©",weight:5},
    {name:"ÙŠÙˆÙØ± Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø¹Ù„Ù…ÙŠØ©",weight:5},
    {name:"ÙŠÙ„ØªØ²Ù… Ø¨Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø©",weight:5},
    {name:"ÙŠØ­Ø¶Ø± ÙˆÙŠØ¬Ù‡Ø² Ø§Ù„Ù…Ø®ØªØ¨Ø±",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© ÙˆØªØ³Ù„ÙŠÙ… Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØªØ®Ø²ÙŠÙ†Ù‡Ø§ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø³Ù„ÙŠÙ…Ø©",weight:5},
    {name:"ÙŠØ¹Ø¯ ØªÙ‚Ø±ÙŠØ± Ø£Ù†Ø´Ø·Ø© ÙˆÙ…Ù‡Ø§Ù… Ø§Ù„Ù…Ø®ØªØ¨Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©",weight:10},
    {name:"ÙŠØ¹Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± Ø¯ÙˆØ±ÙŠØ© Ø¹Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª",weight:10},
  ],
  counselor:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:20},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:5},
    {name:"ÙŠÙ‚Ø¯Ù… Ø§Ù„ØªØ¯Ø®Ù„Ø§Øª Ø§Ù„ØªØ±Ø¨ÙˆÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·",weight:5},
    {name:"ØªÙ‚Ø¯ÙŠÙ… Ø¨Ø±Ø§Ù…Ø¬ ØªØ±Ø¨ÙˆÙŠØ© Ù„Ø±ÙØ¹ Ø¯Ø§ÙØ¹ÙŠØ© Ø§Ù„Ø·Ù„Ø¨Ø© Ù„Ù„ØªØ¹Ù„Ù…",weight:5},
    {name:"Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠ",weight:10},
    {name:"ÙŠØ¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª ÙˆÙŠÙ‚Ø¯Ù… Ø¨Ø±Ø§Ù…Ø¬ Ø¯Ø¹Ù… Ù…Ù†Ø§Ø³Ø¨Ø©",weight:10},
    {name:"ÙŠØ¹Ø²Ø² Ø§Ù„Ù‚ÙŠÙ… ÙˆØ§Ù„Ø³Ù„ÙˆÙƒÙŠØ§Øª Ù„Ù„Ù…ØªØ¹Ù„Ù…ÙŠÙ†",weight:10},
    {name:"ÙŠÙ‚Ø¯Ù… Ø£Ù†Ø´Ø·Ø© Ø¥Ø±Ø´Ø§Ø¯ÙŠØ©",weight:10},
    {name:"ÙŠØ³Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ",weight:5},
    {name:"ÙŠØ¹Ø²Ø² Ø§Ù„ØªÙÙˆÙ‚ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ",weight:5},
    {name:"ÙŠÙ‚Ø¯Ù… ØªØ¯Ø®Ù„Ø§Øª ØªØ±Ø¨ÙˆÙŠØ© Ù„Ù„Ù…ØªØ¹Ø«Ø±ÙŠÙ† ÙˆØ§Ù„Ù…Ø¹ÙŠØ¯ÙŠÙ† Ø¯Ø±Ø§Ø³ÙŠÙ‹Ø§",weight:5},
    {name:"ØªÙˆØ¹ÙŠØ© Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ± Ø¨Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³Ù„ÙˆÙƒ ÙˆØ§Ù„Ù…ÙˆØ§Ø¸Ø¨Ø©",weight:5},
  ],
  principal:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:5},
    {name:"Ù…Ø±Ù† ÙˆÙ‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° Ø£Ø¹Ù…Ø§Ù„Ù‡ ÙÙŠ Ø¸Ù„ Ø¸Ø±ÙˆÙ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©",weight:5},
    {name:"ÙŠØ¯Ø¹Ù… ÙˆÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©",weight:5},
    {name:"ÙŠØªØ®Ø° Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ØªØ±Ø¨ÙˆÙŠØ© ØªØ­Ù‚Ù‚ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ",weight:5},
    {name:"ÙŠØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø¨ÙƒÙØ§Ø¡Ø©",weight:5},
    {name:"ÙŠÙØ¹Ø¯ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆÙŠØ¹ØªÙ…Ø¯Ù‡Ø§",weight:5},
    {name:"ÙŠÙ‚Ø¯Ù… Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© ÙˆÙŠØªØ§Ø¨Ø¹ ØªØ­Ù‚Ù‚ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ",weight:5},
    {name:"ÙŠØ¯Ø¹Ù… ØªÙ†ÙÙŠØ° Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"ÙŠÙ‚ÙŠÙ… Ø£Ø¯Ø§Ø¡ Ù…Ù†Ø³ÙˆØ¨ÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©",weight:5},
    {name:"ÙŠÙ†ÙØ° Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¹Ù„Ù…ÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ¹Ù„Ù…",weight:15},
    {name:"ÙŠÙ‚ÙŠØ³ ÙˆÙŠØ±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©",weight:10},
    {name:"ÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© Ø¨Ø£Ù†ÙˆØ§Ø¹Ù‡Ø§",weight:5},
    {name:"ÙŠØªØ§Ø¨Ø¹ ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© ÙØ±Øµ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØµÙÙŠØ© ÙˆØºÙŠØ± Ø§Ù„ØµÙÙŠØ©",weight:5},
    {name:"ØªÙˆØ¸ÙŠÙ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØªØ·Ø¨ÙŠÙ‚Ø§ØªÙ‡Ø§ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ©",weight:5},
    {name:"ÙŠØ¹Ø²Ù‘Ø² Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ù„Ø¯Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© Ù…Ø¯Ø±Ø³ÙŠØ© Ø¢Ù…Ù†Ø© ÙˆÙ…Ù‡ÙŠØ£Ø© Ù„Ù„ØªØ¹Ù„Ù…",weight:5},
  ],
  vp:[
    {name:"Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"Ø§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø£ÙˆÙ„ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙˆØ±",weight:5},
    {name:"Ù…Ø±Ù† ÙˆÙ‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ ØªÙ†ÙÙŠØ° Ø£Ø¹Ù…Ø§Ù„Ù‡ ÙÙŠ Ø¸Ù„ Ø¸Ø±ÙˆÙ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©",weight:5},
    {name:"ÙŠØ¯Ø¹Ù… ÙˆÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©",weight:5},
    {name:"ÙŠØªØ®Ø° Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ØªØ±Ø¨ÙˆÙŠØ© ØªØ­Ù‚Ù‚ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ",weight:10},
    {name:"ÙŠØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ÙÙŠ Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø¨ÙƒÙØ§Ø¡Ø©",weight:5},
    {name:"ÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"ÙŠÙ‚Ø¯Ù… Ø§Ù„ØªØºØ°ÙŠØ© Ø§Ù„Ø±Ø§Ø¬Ø¹Ø© ÙˆÙŠØªØ§Ø¨Ø¹ ØªØ­Ù‚Ù‚ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ",weight:5},
    {name:"ÙŠØ¯Ø¹Ù… ØªÙ†ÙÙŠØ° Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ",weight:5},
    {name:"ÙŠÙ‚ÙŠÙ… Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†",weight:5},
    {name:"ÙŠÙ†ÙØ° Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø¹Ù„Ù…ÙŠØ© Ù„ØªØ­Ø³ÙŠÙ† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ¹Ù„Ù…",weight:15},
    {name:"ÙŠØ±ÙØ¹ Ù…Ø³ØªÙˆÙ‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…Ø¯Ø±Ø³Ø©",weight:5},
    {name:"ÙŠØ´Ø§Ø±Ùƒ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© Ø¨Ø£Ù†ÙˆØ§Ø¹Ù‡Ø§",weight:5},
    {name:"ÙŠØªØ§Ø¨Ø¹ ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø·Ø· Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© ÙØ±Øµ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ù„Ø§Ø¨ ÙÙŠ Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØµÙÙŠØ© ÙˆØºÙŠØ± Ø§Ù„ØµÙÙŠØ©",weight:5},
    {name:"ØªÙˆØ¸ÙŠÙ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©",weight:5},
    {name:"ÙŠØ¹Ø²Ø² Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ Ù„Ù„Ø·Ù„Ø§Ø¨",weight:5},
    {name:"ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ¦Ø© Ù…Ø¯Ø±Ø³ÙŠØ© Ø¢Ù…Ù†Ø© ÙˆÙ…Ù‡ÙŠØ£Ø© Ù„Ù„ØªØ¹Ù„Ù…",weight:5},
  ],
};

/* Ø£Ù‡Ø¯Ø§Ù Ø§ÙØªØ±Ø§Ø¶ÙŠØ© */
const GOALS={
  teacher:[
    {g:"Ø±ÙØ¹ Ù…ØªÙˆØ³Ø· Ù†ÙˆØ§ØªØ¬ Ø§Ù„ØªØ¹Ù„Ù…",kpi:"ØªØ­Ø³Ù‘Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ù‚ØµÙŠØ±Ø©",target:"â‰¥ 15%"},
    {g:"ØªÙ†ÙˆÙŠØ¹ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØµÙÙŠØ©",kpi:"Ø¯Ø±ÙˆØ³ Ù†Ø´Ø·Ø©/Ø£Ø³Ø¨ÙˆØ¹",target:"â‰¥ 3"},
    {g:"ØªØ¹Ø²ÙŠØ² Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ù…Ù† Ø£Ø¬Ù„ Ø§Ù„ØªØ¹Ù„Ù…",kpi:"Ù†Ù…Ø§Ø°Ø¬ ØªÙ‚ÙˆÙŠÙ… Ø¨Ù†Ø§Ø¦ÙŠ/Ø´Ù‡Ø±",target:"â‰¥ 4"},
    {g:"ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„ØµÙÙŠ",kpi:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø®Ø·Ø© Ø§Ù„ØµÙÙŠØ©",target:"â‰¥ 90%"},
  ],
  vp:[
    {g:"Ø±ÙØ¹ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·",kpi:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¶ÙˆØ±",target:"â‰¥ 95%"},
    {g:"ØªØ­Ø³ÙŠÙ† Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª",kpi:"ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠØ©",target:"12"},
    {g:"ØªÙ†ÙÙŠØ° Ø§Ù„Ø®Ø·Ø·",kpi:"Ù†Ø³Ø¨Ø© Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ø®Ø·Ø©",target:"â‰¥ 90%"},
    {g:"Ø§Ù„Ø´Ø±Ø§ÙƒØ§Øª",kpi:"Ù…Ø¨Ø§Ø¯Ø±Ø§Øª Ù†ÙˆØ¹ÙŠØ©/ÙØµÙ„",target:"â‰¥ 4"},
  ],
  principal:[
    {g:"ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø§Ù…Ù„",kpi:"Ù…Ø¤Ø´Ø± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©",target:"â‰¥ 85%"},
    {g:"Ø±ÙØ¹ Ø§Ù„Ù†ÙˆØ§ØªØ¬",kpi:"ØªØ­Ø³Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©",target:"â‰¥ 10%"},
    {g:"Ø§Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ",kpi:"Ø¨Ø±Ø§Ù…Ø¬ Ù†ÙˆØ¹ÙŠØ©/ÙØµÙ„",target:"â‰¥ 3"},
    {g:"Ø§Ù„Ø³Ù„Ø§Ù…Ø©",kpi:"Ø§Ø³ØªÙŠÙØ§Ø¡ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ù„Ø§Ù…Ø©",target:"100%"},
  ],
  counselor:[
    {g:"ØªÙ…ÙƒÙŠÙ† Ø§Ù„ØªÙˆØ¬ÙŠÙ‡",kpi:"Ø¬Ù„Ø³Ø§Øª Ø¥Ø±Ø´Ø§Ø¯/Ø£Ø³Ø¨ÙˆØ¹",target:"â‰¥ 5"},
    {g:"Ø®Ø·Ø· ÙØ±Ø¯ÙŠØ©",kpi:"Ø®Ø·Ø· Ù…ÙØ¹Ù‘Ù„Ø©/Ø´Ù‡Ø±",target:"â‰¥ 5"},
    {g:"Ø®ÙØ¶ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ§Øª",kpi:"Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù†Ø®ÙØ§Ø¶",target:"â‰¥ 30%"},
    {g:"Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ù…Ù‡Ù†ÙŠ",kpi:"ÙˆØ±Ø´/ÙØµÙ„",target:"â‰¥ 3"},
  ],
  lab:[
    {g:"Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ù…Ø®ØªØ¨Ø±",kpi:"Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¹Ø§Ù…Ù„Ø©",target:"â‰¥ 95%"},
    {g:"Ø§Ù„Ø³Ù„Ø§Ù…Ø©",kpi:"ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª",target:"100%"},
    {g:"Ø§Ù„ØªØ¬Ø§Ø±Ø¨",kpi:"Ø­ØµØµ Ù…Ø®ØªØ¨Ø±/Ø£Ø³Ø¨ÙˆØ¹",target:"â‰¥ 3"},
    {g:"Ø§Ù„ØªÙˆØ«ÙŠÙ‚",kpi:"ØªÙ‚Ø§Ø±ÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©/Ø´Ù‡Ø±",target:"12"},
  ],
  kg:[
    {g:"ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ¦Ø©",kpi:"Ø§Ø³ØªÙŠÙØ§Ø¡ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø±ÙˆØ¶Ø©",target:"100%"},
    {g:"ØªÙ†Ù…ÙŠØ© Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„Ø£Ø·ÙØ§Ù„",kpi:"Ø£Ù†Ø´Ø·Ø© Ù†ÙˆØ¹ÙŠØ©/Ø£Ø³Ø¨ÙˆØ¹",target:"â‰¥ 3"},
    {g:"Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ù…Ø³ØªÙ…Ø±",kpi:"Ù†Ù…Ø§Ø°Ø¬ ØªÙ‚ÙˆÙŠÙ…/Ø·ÙÙ„/Ø´Ù‡Ø±",target:"â‰¥ 2"},
    {g:"Ø§Ù„Ø´Ø±Ø§ÙƒØ© Ø§Ù„Ø£Ø³Ø±ÙŠØ©",kpi:"ÙØ¹Ø§Ù„ÙŠØ§Øª/ÙØµÙ„",target:"â‰¥ 2"},
  ],
  health:[
    {g:"Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„ØµØ­ÙŠ",kpi:"Ø¨Ø±Ø§Ù…Ø¬ ØªÙˆØ¹ÙˆÙŠØ©/ÙØµÙ„",target:"â‰¥ 3"},
    {g:"Ø­ØµØ± Ø§Ù„Ø­Ø§Ù„Ø§Øª",kpi:"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„Ø§Øª",target:"Ø´Ù‡Ø±ÙŠ"},
    {g:"Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø¹ÙŠØ§Ø¯Ø©",kpi:"ØªÙˆÙØ± Ø§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª",target:"100%"},
    {g:"Ø§Ù„Ø¬ÙˆÙ„Ø§Øª Ø§Ù„ÙˆÙ‚Ø§Ø¦ÙŠØ©",kpi:"Ø²ÙŠØ§Ø±Ø§Øª/Ø´Ù‡Ø±",target:"â‰¥ 2"},
  ],
  activity:[
    {g:"Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø·Ù„Ø§Ø¨",kpi:"Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©",target:"â‰¥ 60%"},
    {g:"Ù†ÙˆØ¹ÙŠØ© Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬",kpi:"Ø¨Ø±Ø§Ù…Ø¬ Ù†ÙˆØ¹ÙŠØ©/ÙØµÙ„",target:"â‰¥ 4"},
    {g:"Ø§Ù„ØªÙˆØ«ÙŠÙ‚",kpi:"Ø´ÙˆØ§Ù‡Ø¯ Ù…Ø¹ØªÙ…Ø¯Ø©/Ø¨Ø±Ù†Ø§Ù…Ø¬",target:"100%"},
    {g:"Ø§Ù„Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ù„Ù…Ø­ØªÙˆÙ‰",kpi:"Ø£Ù†Ø´Ø·Ø© Ù…Ø±ØªØ¨Ø·Ø©/ÙØµÙ„",target:"â‰¥ 3"},
  ],
};

/* Ø¨Ù†Ø§Ø¡ Ø§Ù„ØµÙÙˆÙ */
function buildRows(items){
  const tb=$("#rows"); tb.innerHTML=""; let wsum=0;
  items.forEach((it,i)=>{
    wsum+=+it.weight;
    const tr=document.createElement('tr'); tr.dataset.w=it.weight;
    tr.innerHTML=`
      <td style="text-align:right"><span style="font-weight:800;color:#0c594e;margin-inline-end:6px">${i+1}</span><span class="item-text">${it.name}</span></td>
      <td>${it.weight}%</td>
      <td><select class="select-mini grade"><option>1</option><option>2</option><option selected>3</option><option>4</option><option>5</option></select></td>
      <td class="result" style="text-align:center"><span class="score">0.00</span></td>`;
    tb.appendChild(tr);
  });
  $("#sumWeight").textContent=wsum+"%";
}

/* Ø­Ø³Ø§Ø¨Ø§Øª */
function recalc(){
  let total=0, ws=0, aN=0, aD=0;
  $$('#rows tr').forEach(tr=>{
    const w=+tr.dataset.w||0; ws+=w;
    const sel=tr.querySelector('.grade');
    const v=sel.disabled?0:(+sel.value||0);
    const s=v?(v/5)*w:0; total+=s;
    tr.querySelector('.score').textContent=s.toFixed(2);
    for(let k=1;k<=5;k++) tr.classList.remove('rate-'+k);
    if(v) tr.classList.add('rate-'+v);
    aN+=v*w; aD+=w;
  });
  $("#sumScore").textContent=total.toFixed(2);
  $("#kpiFill").style.width=Math.min(100,total)+"%";
  $("#kpiLabelL").textContent=`Ù…Ø¤Ø´Ø± Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²: ${total.toFixed(0)}%`;
  $("#kpiLabelR").textContent=`Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ÙˆØ²Ø§Ù†: ${ws}%`;
  const avg=aD?(aN/aD):0;
  $("#avgOutOf5").textContent=avg.toFixed(2);
  $("#kpiLabelM").textContent=`Ù…ØªÙˆØ³Ø· Ø§Ù„Ø³Ù‘ÙÙ„Ù‘Ù…: ${avg.toFixed(2)} / 5`;
  buildInsights();
}

/* Ù‚ÙˆØ©/ØªØ­Ø³ÙŠÙ† */
function buildInsights(){
  const items=$$('#rows tr'); const strengths=[], improve=[];
  items.forEach(tr=>{
    const sel=tr.querySelector('.grade'); const v=sel.disabled?0:+sel.value||0;
    const name=tr.querySelector('.item-text').textContent.trim(); const w=+tr.dataset.w||0;
    if(v>=4) strengths.push(`â€¢ ØªÙ…ÙŠØ² ÙÙŠ Â«${name}Â» (ÙˆØ²Ù† ${w}%).`);
    if(v && v<=2) improve.push(`â€¢ ØªØ­Ø³ÙŠÙ† Â«${name}Â» Ø¨Ø®Ø·Ø© Ø¥Ø¬Ø±Ø§Ø¦ÙŠØ© ÙˆØ´ÙˆØ§Ù‡Ø¯ Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© (ÙˆØ²Ù† ${w}%).`);
  });
  $('#strengthsBox').textContent=strengths.length?strengths.join('\n'):'â€”';
  $('#improveBox').textContent=improve.length?improve.join('\n'):'â€”';
  $('#signTeacherName').textContent=$('#tName').value||'â€”';
}

/* ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ ÙˆØ§Ù„Ù…Ø±Ø­Ù„Ø© */
function applyModelStage(){
  const key=$('#modelSelect').value, arr=RUBRICS[key]||[];
  buildRows(arr);

  // Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªØ®Ø·ÙŠØ·
  const gb=$('#goalsBody'); gb.innerHTML='';
  (GOALS[key]||[]).forEach(r=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><input class="goal-input" value="${r.g}"></td><td><input class="goal-input" value="${r.kpi}"></td><td><input class="goal-input" value="${r.target}"></td>`;
    gb.appendChild(tr);
  });
  while($('#goalsBody').children.length<4){
    const tr=document.createElement('tr');
    tr.innerHTML=`<td><input class="goal-input" value=""></td><td><input class="goal-input" value=""></td><td><input class="goal-input" value=""></td>`;
    gb.appendChild(tr);
  }

  const stage=$('#stageSelect').value;
  const inPlanning=(stage==='first');

  // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø³Ù„Ù… ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚ÙˆØ©/Ø§Ù„ØªØ­Ø³ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ·
  $$('.grade').forEach(s=>{ s.disabled=inPlanning; s.style.opacity=inPlanning?'.28':'.65'; });
  $('#goalsWrap').style.display=inPlanning?'block':'none';
  $('#siWrap').style.display=inPlanning?'none':'grid';

  $('#modelTxt').textContent='Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: '+$('#modelSelect').selectedOptions[0].textContent;
  recalc();
}

/* Ø­ÙØ¸ Ù…Ø­Ù„ÙŠ */
function keyFor(){return `PF_${($('#tName').value||'').trim()}_${$('#modelSelect').value}_${$('#stageSelect').value}`;}
function autoSave(){
  const rows=$$('#rows tr').map(tr=>({n:tr.querySelector('.item-text').textContent,w:+tr.dataset.w,v:+tr.querySelector('.grade').value,dis:tr.querySelector('.grade').disabled}));
  const goals=[...$('#goalsBody').querySelectorAll('tr')].map(tr=>{const t=tr.querySelectorAll('input');return{g:t[0].value,kpi:t[1].value,target:t[2].value}});
  const data={model:$('#modelSelect').value,stage:$('#stageSelect').value,rows,goals,meta:{n:$('#tName').value,id:$('#tId').value,spec:$('#tSpec').value,rank:$('#tRank').value}};
  localStorage.setItem(keyFor(),JSON.stringify(data));
}
function tryLoad(){
  const raw=localStorage.getItem(keyFor()); if(!raw) return;
  const d=JSON.parse(raw);
  $$('#rows tr').forEach((tr,i)=>{const r=d.rows[i]; if(r){tr.querySelector('.grade').value=r.v; tr.querySelector('.grade').disabled=!!r.dis;}});
  if(d.goals?.length){
    const gb=$('#goalsBody'); gb.innerHTML='';
    d.goals.forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td><input class="goal-input" value="${r.g||''}"></td><td><input class="goal-input" value="${r.kpi||''}"></td><td><input class="goal-input" value="${r.target||''}"></td>`;
      gb.appendChild(tr);
    });
  }
  $('#tName').value=d.meta?.n||''; $('#tId').value=d.meta?.id||''; $('#tSpec').value=d.meta?.spec||''; $('#tRank').value=d.meta?.rank||'';
  recalc();
}

/* Ø£Ø­Ø¯Ø§Ø« Ø¹Ø§Ù…Ø© */
document.addEventListener('change',e=>{ if(e.target.classList.contains('grade')||e.target.classList.contains('goal-input')){recalc();autoSave();}});
$('#modelSelect').addEventListener('change',()=>{applyModelStage();autoSave();});
$('#stageSelect').addEventListener('change',()=>{applyModelStage();autoSave();});
applyModelStage(); tryLoad();

/* Ø¹Ø¯Ø³Ø© Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ (Ø§Ø³ØªÙŠØ±Ø§Ø¯ Excel) */
const HEADER_MAP=[
  {keys:['Ø§Ù„Ø§Ø³Ù…','Ø§Ø³Ù…','Name','Full Name','fullname'],prop:'name'},
  {keys:['Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©','Ø±Ù‚Ù…','Ù‡ÙˆÙŠØ©','ID','National ID','nationalid','nid'],prop:'id'},
  {keys:['Ø§Ù„ØªØ®ØµØµ','ØªØ®ØµØµ','Specialty','Major','speciality','major'],prop:'spec'},
  {keys:['Ø§Ù„Ù…Ø±ØªØ¨Ø©','Ø§Ù„Ø±ØªØ¨Ø©','Ù…Ø±ØªØ¨Ø©','Ø±ØªØ¨Ø©','Rank','Grade','rank','grade'],prop:'rank'},
  {keys:['Ø§Ù„Ù…Ø³Ù…Ù‰','Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ','ÙˆØ¸ÙŠÙÙŠ','Ø§Ù„Ù…Ø³Ù…Ù‰Ø§Ù„ÙˆØ¸ÙŠÙÙŠ','Title','Role','title','role'],prop:'title'}
];
function norm(s){return String(s||'').toLowerCase().replace(/[ \u200f\u200e._\-:ØŒ,]/g,'');}
function findProp(h){
  const n=norm(h);
  for(const m of HEADER_MAP){
    for(const k of m.keys){
      if(n.includes(norm(k))) return m.prop;
    }
  }
  return null;
}
function getNames(){return JSON.parse(localStorage.getItem('namesV2')||'[]');}
function setNames(a){localStorage.setItem('namesV2',JSON.stringify(a));}
function refreshNameList(){
  const box=$("#nameList"); box.innerHTML="";
  const names=getNames();
  $("#nameStats").textContent=names.length?`Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡: ${names.length}`:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ù…Ø§Ø¡ Ø¨Ø¹Ø¯.";
  if(!names.length)return;
  const grid=document.createElement('div');grid.style.display='grid';grid.style.gridTemplateColumns='repeat(auto-fill,minmax(240px,1fr))';grid.style.gap='8px';
  names.forEach(o=>{
    const card=document.createElement('div');card.style.border='1px solid var(--border)';card.style.borderRadius='10px';card.style.padding='8px';card.style.cursor='pointer';card.style.background='#fff';
    card.innerHTML=`<div style="font-weight:900;color:#0c594e">${o.name}</div><div style="font-size:12px;color:#667;display:flex;gap:6px;flex-wrap:wrap"><span>${o.id||'â€”'}</span><span>${o.spec||'â€”'}</span><span>${o.rank||'â€”'}</span><span>${o.title||'â€”'}</span></div>`;
    card.onclick=()=>{$('#tName').value=o.name||'';$('#tId').value=o.id||'';$('#tSpec').value=o.spec||'';$('#tRank').value=o.rank||'';$('#mini').style.display='none';recalc();autoSave();};
    grid.appendChild(card);
  }); box.appendChild(grid);
}
$('#openMini').addEventListener('click',()=>{refreshNameList();$('#mini').style.display='flex';});
$('#miniClose').addEventListener('click',()=>$('#mini').style.display='none');
$('#mini').addEventListener('click',e=>{if(e.target.id==='mini')$('#mini').style.display='none';});
$('#btnPickFile').addEventListener('click',()=>$('#xlsInput').click());
$('#btnTpl').addEventListener('click',()=>{
  const rows=[["Ø§Ù„Ø§Ø³Ù…","Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©","Ø§Ù„ØªØ®ØµØµ","Ø§Ù„Ù…Ø±ØªØ¨Ø©","Ø§Ù„Ù…Ø³Ù…Ù‰"],[""],];
  const ws=XLSX.utils.aoa_to_sheet(rows); const wb=XLSX.utils.book_new(); XLSX.utils.book_append_sheet(wb,ws,"Ø£Ø³Ù…Ø§Ø¡");
  const wbout=XLSX.write(wb,{bookType:'xlsx',type:'array'}); saveAs(new Blob([wbout],{type:"application/octet-stream"}),"template_names.xlsx");
});
$('#xlsInput').addEventListener('change',async e=>{
  const f=e.target.files[0]; if(!f)return;
  try{
    const data=await f.arrayBuffer(); const wb=XLSX.read(data,{type:'array'}); const all=[];
    wb.SheetNames.forEach(name=>{
      const ws=wb.Sheets[name]; const rows=XLSX.utils.sheet_to_json(ws,{header:1,defval:''}); if(!rows.length)return;
      const head=rows[0]; const idx={}; head.forEach((h,i)=>{const p=findProp(h); if(p) idx[p]=i;});
      for(let r=1;r<rows.length;r++){
        const row=rows[r]; if(!row.length)continue;
        const o={}; Object.keys(idx).forEach(p=>o[p]=String(row[idx[p]]||'').trim());
        if(o.name) all.push(o);
      }
    });
    if(all.length){
      const prev=getNames(); const mix=[...prev];
      all.forEach(o=>{if(!mix.some(x=>x.name===o.name && x.id===o.id))mix.push(o)});
      setNames(mix); refreshNameList();
    } else alert('Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø©. ØªØ£ÙƒØ¯ Ù…Ù† ØµÙ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†.');
  }catch(err){console.error(err);alert('ØªØ¹Ø°Ù‘Ø± Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù.');}
  e.target.value='';
});

/* Ù†ÙˆØ§ÙØ° */
$('#openHelp').addEventListener('click',()=>$('#helpModal').style.display='flex');
$('#openGuides').addEventListener('click',()=>$('#guidesModal').style.display='flex');
document.addEventListener('click',e=>{
  const sel=e.target.getAttribute('data-close'); if(sel) $(sel).style.display='none';
  if(e.target.id==='helpModal') $('#helpModal').style.display='none';
  if(e.target.id==='guidesModal') $('#guidesModal').style.display='none';
});

/* â€”â€”â€” Ø·Ø¨Ø§Ø¹Ø© ÙˆPDF Ù…Ø¹ Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØµØ¯ÙŠØ± â€”â€”â€” */
function ensureImagesLoaded(rootDoc){
  const imgs=[...rootDoc.querySelectorAll('img')]; if(!imgs.length) return Promise.resolve();
  return Promise.all(imgs.map(img=> new Promise(res=>{ if(img.complete) return res(); img.onload=()=>res(); img.onerror=()=>res(); })));
}
function hideExportables(root,hide=true){
  const nodes=[...root.querySelectorAll('[data-hide-on-export]')];
  nodes.forEach(n=>{ if(hide){ n.setAttribute('data-prev-display', n.style.display||''); n.style.display='none'; } else { n.style.display=n.getAttribute('data-prev-display')||''; n.removeAttribute('data-prev-display'); } });
}
async function savePdfSmart(targetEl, filename){
  // 1) Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
  try{
    const w=window.open('','_blank','noopener,noreferrer,width=900,height=1200');
    if(w){
      const html = `
      <html dir="rtl" lang="ar">
        <head>
          <title>${filename}</title>
          <meta charset="utf-8">
          <style>
            @page{size:A4;margin:12mm}
            body{font-family:Tajawal,system-ui;margin:0}
            .no-print,[data-hide-on-export]{display:none!important}
          </style>
        </head>
        <body>${targetEl.outerHTML}</body>
      </html>`;
      w.document.write(html);
      w.document.close();
      await new Promise(r=>setTimeout(r,300));
      await ensureImagesLoaded(w.document);
      w.focus(); w.print();
      setTimeout(()=>w.close(),800);
      return;
    }
  }catch(e){console.warn('Ù†Ø§ÙØ°Ø© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙØ´Ù„Øª',e);}

  // 2) html2canvas + jsPDF
  try{
    hideExportables(document,true);
    await ensureImagesLoaded(document);
    const { jsPDF } = window.jspdf;
    const canvas = await html2canvas(targetEl,{scale:2,useCORS:true,backgroundColor:'#ffffff',windowWidth:document.documentElement.scrollWidth});
    const img = canvas.toDataURL('image/png');
    const pdf = new jsPDF({orientation:'p',unit:'mm',format:'a4'});
    const props=pdf.getImageProperties(img); const w=210, h=(props.height*w)/props.width;
    pdf.addImage(img,'PNG',0,0,w,h);
    pdf.save(filename);
    return;
  }catch(e){console.warn('html2canvas ÙØ´Ù„',e);}
  finally{
    hideExportables(document,false);
  }

  // 3) Ø·ÙˆØ§Ø±Ø¦
  try{
    const w2=window.open('','_blank'); w2.document.write('<pre>ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ PDF ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§. Ø§Ø³ØªØ®Ø¯Ù… Ctrl/Cmd+P Ø«Ù… Ø§Ø®ØªØ± "Ø­ÙØ¸ ÙƒÙ€ PDF".</pre>'); w2.document.close(); w2.focus();
  }catch(e){ alert('ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ PDF.'); }
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… */
$('#btnPrint').addEventListener('click',()=>window.print());
$('#btnPdf').addEventListener('click',async()=>{
  const name=$('#tName').value||'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…';
  await savePdfSmart(document.getElementById('page'), `ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ - ${name}.pdf`);
});
$('#btnSave').addEventListener('click',()=>{autoSave();alert('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠÙ‹Ø§.');});
$('#btnClear').addEventListener('click',()=>{
  const stage=$('#stageSelect').value;
  if(stage==='first'){ $('#goalsBody').querySelectorAll('input').forEach(i=>i.value=''); }
  else{ $$('.grade').forEach(s=> s.value='3'); }
  recalc(); autoSave();
});
const DEFAULT_PHONE= localStorage.getItem('waPhone') || '966500000000';
function buildWhatsAppText(){
  const name=$('#tName').value||'â€”', model=$('#modelSelect').selectedOptions[0].textContent, stage=$('#stageSelect').selectedOptions[0].textContent;
  const lines=[`ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡ â€” ${name} â€” ${model} â€” ${stage}`, `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${$('#sumScore').textContent}`, `Ø§Ù„Ù…ØªÙˆØ³Ø·: ${$('#avgOutOf5').textContent}/5`, '', 'Ù…Ù„Ø®Øµ:'];
  $$('#rows tr').forEach(tr=>{const item=tr.querySelector('.item-text').textContent; const w=+tr.dataset.w; const sel=tr.querySelector('.grade'); const v= sel.disabled? 0 : (+sel.value||0); const s= v? (v/5)*w : 0; lines.push(`- ${item}: ÙˆØ²Ù† ${w}%, Ø¯Ø±Ø¬Ø© ${v||'-'}/5, Ù†Ø§ØªØ¬ ${s.toFixed(2)}`);});
  lines.push('', 'Ù‚ÙˆØ©:', $('#strengthsBox').textContent||'â€”', '', 'ØªØ­Ø³ÙŠÙ†:', $('#improveBox').textContent||'â€”'); return encodeURIComponent(lines.join("\n"));
}
$('#btnWhatsApp').addEventListener('click',()=>{
  const phone=prompt('Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ù…Ø¹ Ù…ÙØªØ§Ø­ Ø§Ù„Ø¯ÙˆÙ„Ø©):',DEFAULT_PHONE)||DEFAULT_PHONE;
  localStorage.setItem('waPhone',phone);
  window.open(`https://wa.me/${phone}?text=${buildWhatsAppText()}`,'_blank');
});

/* Ø®Ø·Ø© ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ */
function buildGapPlan(){
  const stage=$('#stageSelect').value; if(stage==='first'){alert('ØªÙÙØ¹Ù„ Ø§Ù„Ø®Ø·Ø© ÙÙŠ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø£Ùˆ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©.'); return;}
  const d=new Date(); const days=['Ø§Ù„Ø£Ø­Ø¯','Ø§Ù„Ø§Ø«Ù†ÙŠÙ†','Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡','Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡','Ø§Ù„Ø®Ù…ÙŠØ³','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ø³Ø¨Øª'];
  const dir=$('#dirText').childNodes[0].nodeValue.trim(); const school=$('#schoolText').childNodes[0].nodeValue.trim();
  const principal=$('#signPrincipalName').textContent.trim();

  $('#g_dirHeader').textContent=dir; $('#g_schoolHeader').textContent=school;
  $('#g_today').textContent=days[d.getDay()]; $('#g_date').textContent=d.toLocaleDateString('ar-SA'); $('#g_model').textContent=$('#modelSelect').selectedOptions[0].textContent;
  $('#g_name').textContent=$('#tName').value||'â€”'; $('#g_dir').textContent=dir;
  $('#g_title').textContent=$('#modelSelect').selectedOptions[0].textContent; $('#g_spec').textContent=$('#tSpec').value||'â€”';
  $('#g_stage').textContent=$('#stageSelect').selectedOptions[0].textContent; $('#g_school').textContent=school;

  // ÙØ¬ÙˆØ§Øª: Ø¯Ø±Ø¬Ø§Øª 1 Ø£Ùˆ 2
  const rows=$$('#rows tr').map(tr=>({name:tr.querySelector('.item-text').textContent,v:tr.querySelector('.grade').disabled?0:+tr.querySelector('.grade').value||0,w:+tr.dataset.w||0})).filter(x=>x.v && x.v<=2);
  rows.sort((a,b)=> (a.v===b.v? a.w-b.w : a.v-b.v));
  const gaps= rows.length? rows : $$('#rows tr').map(tr=>({name:tr.querySelector('.item-text').textContent,v:+tr.querySelector('.grade').value||5,w:+tr.dataset.w||0})).sort((a,b)=> (a.v===b.v? a.w-b.w : a.v-b.v)).slice(0,3);
  const body=$('#g_targets'); body.innerHTML='';
  gaps.forEach(g=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${g.name}</td>`+[1,2,3,4,5].map(k=>`<td style="font-weight:900">${k===g.v?'âœ“':''}</td>`).join(''); body.appendChild(tr);});
  const avg= $('#avgOutOf5').textContent||'0'; $('#g_grade').textContent=`${(+avg).toFixed(2)} / 5`;
  $('#g_strengths').textContent=($('#strengthsBox').textContent||'').trim()||'â€”';
  $('#g_gaps').textContent=gaps.map(g=>`â€¢ ${g.name}`).join('\n')||'â€”';
  const actions=$('#g_actions'); actions.innerHTML=''; gaps.forEach((g,i)=>{const tr=document.createElement('tr'); tr.innerHTML=`<td>${i+1}</td><td contenteditable="true">Ø¥Ø¬Ø±Ø§Ø¡ ØªØ­Ø³ÙŠÙ† Ù„Ø¹Ù†ØµØ± Â«${g.name}Â»</td><td contenteditable="true">Ù…ÙˆØ§Ø¯/Ø£Ø¯ÙˆØ§Øª/Ø¯Ø¹Ù…</td><td contenteditable="true">3 Ø£Ø³Ø§Ø¨ÙŠØ¹</td><td contenteditable="true">ØªØ¯Ø±ÙŠØ¨/Ø²ÙŠØ§Ø±Ø©</td><td contenteditable="true">${$('#tName').value||'Ø´Ø§ØºÙ„ Ø§Ù„ÙˆØ¸ÙŠÙØ©'}</td><td contenteditable="true">Ø§Ù„Ù…Ø¯ÙŠØ±/Ø§Ù„Ù…Ø´Ø±Ù</td><td contenteditable="true">ØªØ­Ø³Ù‘Ù† â‰¥ Ø¯Ø±Ø¬Ø©</td>`; actions.appendChild(tr);});

  // ØªØ¹Ø¨Ø¦Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØªÙˆØ§Ù‚ÙŠØ¹ Ø£Ø³ÙÙ„ Ø§Ù„Ø®Ø·Ø©
  $('#g_signTeacher').textContent=$('#tName').value||'â€”';
  $('#g_signPrincipal').textContent=principal;

  $('#gapModal').style.display='flex';
}
document.getElementById('btnGapPlan').addEventListener('click',buildGapPlan);
document.getElementById('gapClose').addEventListener('click',()=> $('#gapModal').style.display='none');
document.getElementById('gapPdf').addEventListener('click',async()=>{
  const name=$('#tName').value||'Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…';
  $('#g_signTeacher').textContent=$('#tName').value||'â€”';
  $('#g_signPrincipal').textContent=$('#signPrincipalName').textContent.trim();
  await savePdfSmart(document.getElementById('gapPanel'), `Ø®Ø·Ø© ØªØ­Ø³ÙŠÙ† ÙØ¬ÙˆØ© Ø§Ù„Ø£Ø¯Ø§Ø¡ - ${name}.pdf`);
});

/* Ø¥ØºÙ„Ø§Ù‚ Ø¹Ø§Ù… Ù„Ù„Ù†ÙˆØ§ÙØ° Ø¨Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§ */
['helpModal','guidesModal','gapModal'].forEach(id=>{
  document.getElementById(id).addEventListener('click',e=>{ if(e.target.id===id) e.currentTarget.style.display='none'; });
});
</script>
</body>
</html>
